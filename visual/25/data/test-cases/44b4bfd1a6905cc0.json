{"uid":"44b4bfd1a6905cc0","name":"Visual testing login page, should fail","fullName":"tests.test_login.TestLogin#test_visual_login_fail","historyId":"7f2efdab587962a83831b5ab7d33c006","time":{"start":1683490170790,"stop":1683490193565,"duration":22775},"description":"Visual testing login page, should fail","descriptionHtml":"<p>Visual testing login page, should fail</p>\n","status":"broken","statusMessage":"Exception: 122599 pixels differ from the expected result","statusTrace":"self = <tests.test_login.TestLogin object at 0x7f42050581d0>\nrequest = <FixtureRequest for <Function test_visual_login_fail[chrome]>>\n\n    @allure.description(\"Visual testing login page, should fail\")\n    @allure.title('Visual testing login page, should fail')\n    @pytest.mark.Visual\n    def test_visual_login_fail(self,request):\n        self.nav_bar.click_login_icon()\n        #This to make the test fail\n        if(request.config.getoption(\"--update-snapshot\")==False):\n            element =self.driver.find_element(By.XPATH, \"//*[contains(text(), 'Log in or register with your mobile number')]\")\n            self.driver.execute_script(\"arguments[0].textContent = 'New text value';\", element)\n>       assert expect_to_have_screenshot(request,self.driver)\n\ntests/test_login.py:19: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nrequest = <FixtureRequest for <Function test_visual_login_fail[chrome]>>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"485c0bc30c842ffd0321bfd55f8e1e05\")>\nkwargs = {}, test_name = 'test_visual_login_fail[chrome]'\ndirectory = '/home/runner/work/selenium-visual-testing/selenium-visual-testing/tests/test_login'\nupdate_snapshot = False\nexpected_snapshot_location = '/home/runner/work/selenium-visual-testing/selenium-visual-testing/tests/test_login/test_visual_login_fail[chrome]-baseline.png'\nactual_snapshot_location = '/home/runner/work/selenium-visual-testing/selenium-visual-testing/tests/test_login/test_visual_login_fail[chrome]-actual.png'\ndiff_snapshot_location = '/home/runner/work/selenium-visual-testing/selenium-visual-testing/tests/test_login/test_visual_login_fail[chrome]-diff.png'\nthreshold = 0.1\n\n    def expect_to_have_screenshot(request: pytest.FixtureRequest,driver:Union[Chrome, Firefox],**kwargs)-> bool:\n        test_name=request.node.name\n        directory= f'{request.node.fspath.dirname}/{request.node.fspath.purebasename}'\n        update_snapshot = request.config.getoption(\"--update-snapshot\")\n        expected_snapshot_location= f'{directory}/{test_name}-baseline.png'\n        actual_snapshot_location= f'{directory}/{test_name}-actual.png'\n        diff_snapshot_location=f'{directory}/{test_name}-diff.png'\n        threshold=kwargs.get('threshold', 0.1)\n    \n        if os.path.exists(actual_snapshot_location):\n            os.remove(actual_snapshot_location)\n        if os.path.exists(diff_snapshot_location):\n            os.remove(diff_snapshot_location)\n        if not os.path.isfile(expected_snapshot_location) and not update_snapshot:\n            raise Exception(\"Baseline screenshot does not exist. Please run the command with --update-snapshot\")\n        wait_for_network_ideal(driver)\n        if 'masked_locators' in kwargs:\n            z_index='2000' if not 'z-index' in kwargs else kwargs[\"z-index\"]\n            mask_element(kwargs['masked_locators'],driver,z_index)\n        if update_snapshot:\n            allure.step(\"Take baseline snapshot\")\n            if not os.path.exists(directory):\n                os.makedirs(directory)\n            if os.path.exists(expected_snapshot_location):\n                os.remove(expected_snapshot_location)\n            if('full_screenshot' in kwargs):\n                driver.save_full_page_screenshot(expected_snapshot_location)\n                return True\n            else:\n                driver.save_screenshot(expected_snapshot_location)\n                return True\n    \n        if('full_screenshot' in kwargs):\n            driver.save_full_page_screenshot(actual_snapshot_location)\n        else:\n            driver.save_screenshot(actual_snapshot_location)\n        if not update_snapshot:\n            expected_image= Image.open(expected_snapshot_location).convert('RGBA')\n            actual_image= Image.open(actual_snapshot_location).convert('RGBA')\n            diff_image = Image.new(\"RGBA\", expected_image.size)\n            allure.step(\"Comparing screenshots\")\n            diff_pixels= pixelmatch(expected_image,actual_image,diff_image,threshold)\n            if diff_pixels>threshold:\n                diff_image.save(diff_snapshot_location)\n>               raise Exception(f\"{diff_pixels} pixels differ from the expected result\")\nE               Exception: 122599 pixels differ from the expected result\n\nutilities/compare_visual.py:70: Exception","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"setup","time":{"start":1683490153138,"stop":1683490170789,"duration":17651},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0}],"testStage":{"description":"Visual testing login page, should fail","status":"broken","statusMessage":"Exception: 122599 pixels differ from the expected result","statusTrace":"self = <tests.test_login.TestLogin object at 0x7f42050581d0>\nrequest = <FixtureRequest for <Function test_visual_login_fail[chrome]>>\n\n    @allure.description(\"Visual testing login page, should fail\")\n    @allure.title('Visual testing login page, should fail')\n    @pytest.mark.Visual\n    def test_visual_login_fail(self,request):\n        self.nav_bar.click_login_icon()\n        #This to make the test fail\n        if(request.config.getoption(\"--update-snapshot\")==False):\n            element =self.driver.find_element(By.XPATH, \"//*[contains(text(), 'Log in or register with your mobile number')]\")\n            self.driver.execute_script(\"arguments[0].textContent = 'New text value';\", element)\n>       assert expect_to_have_screenshot(request,self.driver)\n\ntests/test_login.py:19: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nrequest = <FixtureRequest for <Function test_visual_login_fail[chrome]>>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"485c0bc30c842ffd0321bfd55f8e1e05\")>\nkwargs = {}, test_name = 'test_visual_login_fail[chrome]'\ndirectory = '/home/runner/work/selenium-visual-testing/selenium-visual-testing/tests/test_login'\nupdate_snapshot = False\nexpected_snapshot_location = '/home/runner/work/selenium-visual-testing/selenium-visual-testing/tests/test_login/test_visual_login_fail[chrome]-baseline.png'\nactual_snapshot_location = '/home/runner/work/selenium-visual-testing/selenium-visual-testing/tests/test_login/test_visual_login_fail[chrome]-actual.png'\ndiff_snapshot_location = '/home/runner/work/selenium-visual-testing/selenium-visual-testing/tests/test_login/test_visual_login_fail[chrome]-diff.png'\nthreshold = 0.1\n\n    def expect_to_have_screenshot(request: pytest.FixtureRequest,driver:Union[Chrome, Firefox],**kwargs)-> bool:\n        test_name=request.node.name\n        directory= f'{request.node.fspath.dirname}/{request.node.fspath.purebasename}'\n        update_snapshot = request.config.getoption(\"--update-snapshot\")\n        expected_snapshot_location= f'{directory}/{test_name}-baseline.png'\n        actual_snapshot_location= f'{directory}/{test_name}-actual.png'\n        diff_snapshot_location=f'{directory}/{test_name}-diff.png'\n        threshold=kwargs.get('threshold', 0.1)\n    \n        if os.path.exists(actual_snapshot_location):\n            os.remove(actual_snapshot_location)\n        if os.path.exists(diff_snapshot_location):\n            os.remove(diff_snapshot_location)\n        if not os.path.isfile(expected_snapshot_location) and not update_snapshot:\n            raise Exception(\"Baseline screenshot does not exist. Please run the command with --update-snapshot\")\n        wait_for_network_ideal(driver)\n        if 'masked_locators' in kwargs:\n            z_index='2000' if not 'z-index' in kwargs else kwargs[\"z-index\"]\n            mask_element(kwargs['masked_locators'],driver,z_index)\n        if update_snapshot:\n            allure.step(\"Take baseline snapshot\")\n            if not os.path.exists(directory):\n                os.makedirs(directory)\n            if os.path.exists(expected_snapshot_location):\n                os.remove(expected_snapshot_location)\n            if('full_screenshot' in kwargs):\n                driver.save_full_page_screenshot(expected_snapshot_location)\n                return True\n            else:\n                driver.save_screenshot(expected_snapshot_location)\n                return True\n    \n        if('full_screenshot' in kwargs):\n            driver.save_full_page_screenshot(actual_snapshot_location)\n        else:\n            driver.save_screenshot(actual_snapshot_location)\n        if not update_snapshot:\n            expected_image= Image.open(expected_snapshot_location).convert('RGBA')\n            actual_image= Image.open(actual_snapshot_location).convert('RGBA')\n            diff_image = Image.new(\"RGBA\", expected_image.size)\n            allure.step(\"Comparing screenshots\")\n            diff_pixels= pixelmatch(expected_image,actual_image,diff_image,threshold)\n            if diff_pixels>threshold:\n                diff_image.save(diff_snapshot_location)\n>               raise Exception(f\"{diff_pixels} pixels differ from the expected result\")\nE               Exception: 122599 pixels differ from the expected result\n\nutilities/compare_visual.py:70: Exception","steps":[{"name":"User clicks login icon in nav bar","time":{"start":1683490170790,"stop":1683490171141,"duration":351},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0}],"attachments":[{"uid":"47f70cc0aa4159de","name":"stderr","source":"47f70cc0aa4159de.txt","type":"text/plain","size":323}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true,"stepsCount":1},"afterStages":[{"name":"setup::0","time":{"start":1683490193571,"stop":1683490193629,"duration":58},"status":"passed","steps":[{"name":"Visual comparison","time":{"start":1683490193571,"stop":1683490193572,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"6eaf6221b79b4251","name":"Expected screenshot","source":"6eaf6221b79b4251.png","type":"image/png","size":43403},{"uid":"12bc0fde03d6a971","name":"Actual screenshot","source":"12bc0fde03d6a971.png","type":"image/png","size":247748},{"uid":"f787ece569a6e686","name":"Visual diff","source":"f787ece569a6e686.png","type":"image/png","size":33327}],"parameters":[],"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[],"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":1}],"labels":[{"name":"tag","value":"chrome"},{"name":"story","value":"Login functionality"},{"name":"tag","value":"Visual"},{"name":"tag","value":"@pytest.mark.usefixtures('setup')"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_login"},{"name":"subSuite","value":"TestLogin"},{"name":"host","value":"fv-az162-72"},{"name":"thread","value":"1767-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser","value":"'chrome'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"77bdf8b1fd115259","status":"broken","statusDetails":"Exception: 122456 pixels differ from the expected result","time":{"start":1683490130249,"stop":1683490153042,"duration":22793}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":13,"skipped":0,"passed":0,"unknown":0,"total":13},"items":[{"uid":"b691cf000760a077","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/24//#testresult/b691cf000760a077","status":"broken","statusDetails":"Exception: 122456 pixels differ from the expected result","time":{"start":1683490156103,"stop":1683490178784,"duration":22681}},{"uid":"6b766e4449385481","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/23//#testresult/6b766e4449385481","status":"broken","statusDetails":"Exception: 122456 pixels differ from the expected result","time":{"start":1683490161387,"stop":1683490184086,"duration":22699}},{"uid":"dcc1e6ae998eec8e","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/22//#testresult/dcc1e6ae998eec8e","status":"broken","statusDetails":"Exception: 122456 pixels differ from the expected result","time":{"start":1683490113032,"stop":1683490135875,"duration":22843}},{"uid":"31378cefb87f9bcb","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/21//#testresult/31378cefb87f9bcb","status":"broken","statusDetails":"Exception: 122456 pixels differ from the expected result","time":{"start":1683490109625,"stop":1683490132294,"duration":22669}},{"uid":"7626a6b3f5e05ea8","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/20//#testresult/7626a6b3f5e05ea8","status":"broken","statusDetails":"Exception: 122456 pixels differ from the expected result","time":{"start":1683490111895,"stop":1683490136295,"duration":24400}},{"uid":"6ed905c8654c2597","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/19//#testresult/6ed905c8654c2597","status":"broken","statusDetails":"Exception: 122456 pixels differ from the expected result","time":{"start":1683490027141,"stop":1683490049867,"duration":22726}},{"uid":"f5adaa1a4caf39f2","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/18//#testresult/f5adaa1a4caf39f2","status":"broken","statusDetails":"Exception: 122718 pixels differ from the expected result","time":{"start":1683489426237,"stop":1683489449116,"duration":22879}},{"uid":"331da5009161a6e5","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/17//#testresult/331da5009161a6e5","status":"broken","statusDetails":"Exception: 123221 pixels differ from the expected result","time":{"start":1683489329856,"stop":1683489352478,"duration":22622}},{"uid":"b8b96f7d5b269d33","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/16//#testresult/b8b96f7d5b269d33","status":"broken","statusDetails":"Exception: 123221 pixels differ from the expected result","time":{"start":1683489235388,"stop":1683489259180,"duration":23792}},{"uid":"e0b4718f80227564","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/15//#testresult/e0b4718f80227564","status":"broken","statusDetails":"Exception: 123221 pixels differ from the expected result","time":{"start":1683489029690,"stop":1683489052256,"duration":22566}},{"uid":"47dc2278e1a76853","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/14//#testresult/47dc2278e1a76853","status":"broken","statusDetails":"Exception: 123221 pixels differ from the expected result","time":{"start":1683488688778,"stop":1683488711279,"duration":22501}},{"uid":"4dbc38ec12fc995b","reportUrl":"https://alyaothman14.github.io/selenium-visual-testing/visual/12//#testresult/4dbc38ec12fc995b","status":"broken","statusDetails":"Exception: 812 pixels differ from the expected result","time":{"start":1683487763289,"stop":1683487780477,"duration":17188}}]},"tags":["chrome","Visual","@pytest.mark.usefixtures('setup')"]},"source":"44b4bfd1a6905cc0.json","parameterValues":["'chrome'"]}